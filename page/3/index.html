<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>大罗说事</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Talk is cheap, show me the code.">
<meta property="og:type" content="website">
<meta property="og:title" content="大罗说事">
<meta property="og:url" content="http://pinned.github.io/page/3/index.html">
<meta property="og:site_name" content="大罗说事">
<meta property="og:description" content="Talk is cheap, show me the code.">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="罗昭成">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="大罗说事" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">大罗说事</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS 订阅"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜索"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://pinned.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2015-04-27-android-reflect-inner-class" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-04-27-android-reflect-inner-class/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-04-27-android-reflect-inner-class/">java反射内部类</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li>在java中反射加载类的方法如下</li>
</ol>
<pre><code class="java">Class rClass = Class.forName(&quot;android.R&quot;);
</code></pre>
<ol start="2">
<li>加载android.R.attr</li>
</ol>
<pre><code class="java">Class attrClass = Class.forName(&quot;android.R$attr&quot;);
</code></pre>
<blockquote>
<p>内部类并不是像调用那样，使用<code>.</code>, 而是使用<code>$</code></p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-04-27-android-reflect-inner-class/" data-id="cli8yhxgf003md9276t677o6d" data-title="java反射内部类" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2015-04-29-android-show-password-text" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-04-29-android-show-password-text/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-04-29-android-show-password-text/">Android显示密码</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code class="java">
//  方法1：
if (mIsShowPsw) &#123;
    mPswEdit.setTransformationMethod(HideReturnsTransformationMethod
            .getInstance());
&#125; else &#123;
    mPswEdit.setTransformationMethod(PasswordTransformationMethod
            .getInstance());
&#125;

// 方法2：
int inputType  = mPswEdit.getInputType();
if (inputType == 129) &#123;
    mPswEdit.setInputType(1);
&#125; else &#123;
    mPswEdit.setInputType(129);
&#125;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-04-29-android-show-password-text/" data-id="cli8yhxgf003od927cmshb89a" data-title="Android显示密码" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2015-04-30-mac-iterm2-zsh" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-04-30-mac-iterm2-zsh/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-04-30-mac-iterm2-zsh/">Mac Iterm2 zsh使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="安装zsh"><a href="#安装zsh" class="headerlink" title="安装zsh"></a>安装zsh</h2><pre><code class="bash">brew install zsh
</code></pre>
<h2 id="下载oh-my-zsh项目"><a href="#下载oh-my-zsh项目" class="headerlink" title="下载oh my zsh项目"></a>下载<code>oh my zsh</code>项目</h2><pre><code class="bash">git clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh
</code></pre>
<h2 id="设置zsh"><a href="#设置zsh" class="headerlink" title="设置zsh"></a>设置zsh</h2><pre><code class="bash">cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc
chsh -s /bin/zsh
</code></pre>
<h2 id="VIM-的一些配置"><a href="#VIM-的一些配置" class="headerlink" title="VIM 的一些配置"></a>VIM 的一些配置</h2><pre><code class="bash">syntax on                &quot;语法高亮
set nu!                  &quot;显示行号
set ai!                  &quot;设置自动缩进
set ruler                &quot;在编辑过程中，在右下角显示光标位置的状态行
set incsearch            &quot;自动匹配单词的位置
set hlsearch             &quot;高亮查找到的所有单词
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-04-30-mac-iterm2-zsh/" data-id="cli8yhxgf003qd927974pa4gu" data-title="Mac Iterm2 zsh使用" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools-Systems/" rel="tag">Tools Systems</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-05-11-svn-to-git" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-05-11-svn-to-git/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-05-11-svn-to-git/">SVN迁移到GIT</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>通过git svn clone将一个SVN项目克隆成一个git版本库</p>
<pre><code class="bash"># 参数--no-metadata表示阻止git导出SVN包含的一些无用信息
git svn clone svn://localhost/proj/ --no-metadata
</code></pre>
<p>提交到git库</p>
<pre><code class="bash">git remote add origin git@localhost/proj.git
git push --set-upstream origin master
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-05-11-svn-to-git/" data-id="cli8yhxgf003rd9271cyf8zuu" data-title="SVN迁移到GIT" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools-SVN-Git/" rel="tag">Tools SVN Git</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-05-11-android-aidl-server" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-05-11-android-aidl-server/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AE%89%E5%8D%93/">安卓</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-05-11-android-aidl-server/">Android Service学习之AIDL, Parcelable和远程服务</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="AIDL的作用"><a href="#AIDL的作用" class="headerlink" title="AIDL的作用"></a>AIDL的作用</h2><p>由于每个应用程序都运行在自己的进程空间，并且可以从应用程序UI运行另一个服务进程，而且经常会在不同的进程间传递对象。在Android平台，一个进程通常不能访问另一个进程的内存空间，所以要想对话，需要将对象分解成操作系统可以理解的基本单元，并且有序的通过进程边界。</p>
<p>通过代码来实现这个数据传输过程是冗长乏味的，Android提供了AIDL工具来处理这项工作。</p>
<p>AIDL (Android Interface Definition Language) 是一种IDL 语言，用于生成可以在Android设备上两个进程之间进行进程间通信(interprocess communication, IPC)的代码。如果在一个进程中（例如Activity）要调用另一个进程中（例如Service）对象的操作，就可以使用AIDL生成可序列化的参数。</p>
<p>AIDL IPC机制是面向接口的，像COM或Corba一样，但是更加轻量级。它是使用代理类在客户端和实现端传递数据。</p>
<h2 id="选择AIDL的使用场合"><a href="#选择AIDL的使用场合" class="headerlink" title="选择AIDL的使用场合"></a>选择AIDL的使用场合</h2><p>官方文档特别提醒我们何时使用AIDL是必要的：只有你允许客户端从不同的应用程序为了进程间的通信而去访问你的service，以及想在你的service处理多线程。</p>
<p>如果不需要进行不同应用程序间的并发通信(IPC)，you should create your interface by implementing a Binder；或者你想进行IPC，但不需要处理多线程的，则implement your interface using a Messenger。无论如何，在使用AIDL前，必须要理解如何绑定service——bindService。</p>
<p>在设计AIDL接口前，要提醒的是，调用AIDL接口是直接的方法调用的，不是我们所想象的调用是发生在线程里。而调用(call)来自local进程或者remote进程，有什么区别呢？尤其是以下情况(引用原文，不作翻译了，以免翻译有误)：</p>
<ul>
<li><p>Calls made from the local process are executed in the same thread that is making the call. If this is your main UI thread, that thread continues to execute in the AIDL interface. If it is another thread, that is the one that executes your code in the service. Thus, if only local threads are accessing the service, you can completely control which threads are executing in it (but if that is the case, then you shouldn’t be using AIDL at all, but should instead create the interface by implementing a Binder).</p>
</li>
<li><p>Calls from a remote process are dispatched from a thread pool the platform maintains inside of your own process. You must be prepared for incoming calls from unknown threads, with multiple calls happening at the same time. In other words, an implementation of an AIDL interface must be completely thread-safe.</p>
</li>
<li><p>The oneway keyword modifies the behavior of remote calls. When used, a remote call does not block; it simply sends the transaction data and immediately returns. The implementation of the interface eventually receives this as a regular call from the Binder thread pool as a normal remote call. If oneway is used with a local call, there is no impact and the call is still synchronous.</p>
</li>
</ul>
<h2 id="定义AIDL接口"><a href="#定义AIDL接口" class="headerlink" title="定义AIDL接口"></a>定义AIDL接口</h2><p>AIDL接口文件，和普通的接口内容没有什么特别，只是它的扩展名为.aidl。保存在src目录下。如果其他应用程序需要IPC，则那些应用程序的src也要带有这个文件。Android SDK tools就会在gen目录自动生成一个IBinder接口文件。service必须适当地实现这个IBinder接口。那么客户端程序就能绑定这个service并在IPC时从IBinder调用方法。</p>
<p>每个aidl文件只能定义一个接口，而且只能是接口的声明和方法的声明。</p>
<ul>
<li><strong>创建.aidl文件</strong></li>
</ul>
<p>AIDL使用简单的语法来声明接口，描述其方法以及方法的参数和返回值。这些参数和返回值可以是任何类型，甚至是其他AIDL生成的接口。</p>
<p>其中对于Java编程语言的基本数据类型 (int, long, char, boolean等),String和CharSequence，集合接口类型List和Map，不需要import 语句。</p>
<p>而如果需要在AIDL中使用其他AIDL接口类型，需要import，即使是在相同包结构下。AIDL允许传递实现Parcelable接口的类，需要import.</p>
<p>需要特别注意的是，对于非基本数据类型，也不是String和CharSequence类型的，需要有方向指示，包括in、out和inout，in表示由客户端设置，out表示由服务端设置，inout是两者均可设置。</p>
<p>AIDL只支持接口方法，不能公开static变量。</p>
<p>例如 (<code>IMyService.aidl</code>)：</p>
<pre><code class="java">package com.demo; 
import com.demo.Person; 
interface IMyService &#123; 
        void savePersonInfo(in Person person); 
        List&lt;Person&gt; getAllPerson(); 
&#125;
</code></pre>
<ul>
<li><strong>实现接口</strong></li>
</ul>
<p>创建一个类实现刚才那个aidl的接口：</p>
<pre><code class="java">public class RemoteService extends Service &#123; 

    private LinkedList&lt;Person&gt; personList = new LinkedList&lt;Person&gt;(); 
     
    @Override 
    public IBinder onBind(Intent intent) &#123; 
        return mBinder; 
    &#125; 

    private final IMyService.Stub mBinder = new IMyService.Stub()&#123; 

        @Override 
        public void savePersonInfo(Person person) throws RemoteException &#123; 
            if (person != null)&#123; 
                personList.add(person); 
            &#125; 
        &#125; 

        @Override 
        public List&lt;Person&gt; getAllPerson() throws RemoteException &#123; 
            return personList; 
        &#125; 
    &#125;; 
&#125;
</code></pre>
<p>这里会看到有一个名为<code>IMyService.Stub</code>类，查看aidl文件生成的Java文件源代码就能发现有这么一段代码：</p>
<pre><code class="java">/** Local-side IPC implementation stub class. */ 
public static abstract class Stub extends android.os.Binder implements com.demo.IMyService
</code></pre>
<p>原来Stub类就是继承于Binder类，也就是说RemoteService类和普通的Service类没什么不同，只是所返回的IBinder对象比较特别，是一个实现了AIDL接口的Binder。</p>
<p>接下来就是关于所传递的数据Bean——Person类，是一个序列化的类，这里使用Parcelable 接口来序列化，是Android提供的一个比Serializable 效率更高的序列化类。<br>Parcelable需要实现三个函数：</p>
<ul>
<li>void writeToParcel(Parcel dest, int flags) 将需要序列化存储的数据写入外部提供的Parcel对象dest。而看了网上的代码例子，个人猜测，读取Parcel数据的次序要和这里的write次序一致，否则可能会读错数据。具体情况我没试验过！</li>
<li>describeContents() 没搞懂有什么用，反正直接返回0也可以</li>
<li>static final Parcelable.Creator对象CREATOR  这个CREATOR命名是固定的，而它对应的接口有两个方法：<br>createFromParcel(Parcel source) 实现从source创建出JavaBean实例的功能</li>
</ul>
<p>newArray(int size) 创建一个类型为T，长度为size的数组，仅一句话（return new T[size])即可。估计本方法是供外部类反序列化本类数组使用。</p>
<p>仔细观察Person类的代码和上面所说的内容：</p>
<pre><code class="java">public class Person implements Parcelable &#123; 

        private String name; 
        private String telNumber; 
        private int age; 

        public Person() &#123;&#125; 

        public Person(Parcel pl)&#123; 
                name = pl.readString(); 
                telNumber = pl.readString(); 
                age = pl.readInt(); 
        &#125; 

        public String getName() &#123; 
                return name; 
        &#125; 

        public void setName(String name) &#123; 
                this.name = name; 
        &#125; 

        public String getTelNumber() &#123; 
                return telNumber; 
        &#125; 

        public void setTelNumber(String telNumber) &#123; 
                this.telNumber = telNumber; 
        &#125; 

        public int getAge() &#123; 
                return age; 
        &#125; 

        public void setAge(int age) &#123; 
                this.age = age; 
        &#125; 

        @Override 
        public int describeContents() &#123; 
                return 0; 
        &#125; 

        @Override 
        public void writeToParcel(Parcel dest, int flags) &#123; 
                dest.writeString(name); 
                dest.writeString(telNumber); 
                dest.writeInt(age); 
        &#125; 

        public static final Parcelable.Creator&lt;Person&gt; CREATOR = new Parcelable.Creator&lt;Person&gt;() &#123; 

                @Override 
                public Person createFromParcel(Parcel source) &#123; 
                        return new Person(source); 
                &#125; 

                @Override 
                public Person[] newArray(int size) &#123; 
                        return new Person[size]; 
                &#125; 

        &#125;; 
&#125;
</code></pre>
<p>然后创建Person.aidl文件，注意这里的parcelable和原来实现的Parcelable 接口，开头的字母p一个小写一个大写：</p>
<pre><code class="java">package com.demo; 

parcelable Person;
</code></pre>
<p>对于实现AIDL接口，官方还提醒我们：</p>
<ol>
<li><p>调用者是不能保证在主线程执行的，所以从一调用的开始就需要考虑多线程处理，以及确保线程安全；</p>
</li>
<li><p>IPC调用是同步的。如果你知道一个IPC服务需要超过几毫秒的时间才能完成地话，你应该避免在Activity的主线程中调用。也就是IPC调用会挂起应用程序导致界面失去响应，这种情况应该考虑单独开启一个线程来处理。</p>
</li>
<li><p>抛出的异常是不能返回给调用者（跨进程抛异常处理是不可取的）。</p>
</li>
</ol>
<ul>
<li><strong>客户端获取接口</strong></li>
</ul>
<p>客户端如何获取AIDL接口呢？通过IMyService.Stub.asInterface(service)来得到IMyService对象：</p>
<pre><code class="java">private IMyService mRemoteService; 

private ServiceConnection mRemoteConnection = new ServiceConnection() &#123;    
        public void onServiceConnected(ComponentName className, IBinder service) &#123;    
                mRemoteService = IMyService.Stub.asInterface(service);    
        &#125;    

        public void onServiceDisconnected(ComponentName className) &#123;    
                mRemoteService = null;    
        &#125;    
&#125;;
</code></pre>
<p>在生成的IMyService.java里面会找到这样的代码：</p>
<pre><code class="java">/** 
* Cast an IBinder object into an com.demo.IMyService interface, 
* generating a proxy if needed. 
*/ 
public static com.demo.IMyService asInterface(android.os.IBinder obj) &#123;...&#125;
</code></pre>
<p>而service的绑定没有什么不同：</p>
<pre><code class="java">if (mIsRemoteBound) &#123; 
        unbindService(mRemoteConnection); 
&#125;else&#123; 
        bindService(new Intent(&quot;com.demo.IMyService&quot;), 
                               mRemoteConnection, Context.BIND_AUTO_CREATE); 
&#125;
mIsRemoteBound = !mIsRemoteBound;
</code></pre>
<h2 id="通过IPC调用-x2F-传递数据"><a href="#通过IPC调用-x2F-传递数据" class="headerlink" title="通过IPC调用&#x2F;传递数据"></a>通过IPC调用&#x2F;传递数据</h2><p>客户端绑定service后就能通过IPC来调用&#x2F;传递数据了，直接调用service对象的接口方法：</p>
<pre><code class="java">addPersonButton.setOnClickListener( 
                new View.OnClickListener()&#123; 
                        private int index = 0; 

                        @Override 
                        public void onClick(View view) &#123; 
                                Person person = new Person(); 
                                index = index + 1; 
                                person.setName(&quot;Person&quot; + index); 
                                person.setAge(20); 
                                person.setTelNumber(&quot;123456&quot;); 
                                try &#123; 
                                        mRemoteService.savePersonInfo(person); 
                                &#125; catch (RemoteException e) &#123; 
                                        e.printStackTrace(); 
                                &#125; 
                        &#125; 
                &#125;); 

listPersonButton.setOnClickListener( 
                new View.OnClickListener()&#123; 

                        @Override 
                        public void onClick(View view) &#123; 
                                List&lt;Person&gt; list = null; 

                                try &#123; 
                                        list = mRemoteService.getAllPerson(); 
                                &#125; catch (RemoteException e) &#123; 
                                        e.printStackTrace(); 
                                &#125; 

                                if (list != null)&#123; 
                                        StringBuilder text = new StringBuilder(); 

                                        for(Person person : list)&#123; 
                                                text.append(&quot;\nPerson name:&quot;); 
                                                text.append(person.getName()); 
                                                text.append(&quot;\n             age :&quot;); 
                                                text.append(person.getAge()); 
                                                text.append(&quot;\n tel number:&quot;); 
                                                text.append(person.getTelNumber()); 
                                        &#125; 

                                        inputPersonEdit.setText(text); 
                                &#125;else &#123; 
                                        Toast.makeText(ServiceActivity.this, &quot;get data error&quot;, 
                                                        Toast.LENGTH_SHORT).show(); 
                                &#125; 
                        &#125; 
                &#125;);
</code></pre>
<h2 id="Permission权限"><a href="#Permission权限" class="headerlink" title="Permission权限"></a>Permission权限</h2><p>如果Service在AndroidManifest.xml中声明了全局的强制的访问权限，其他引用必须声明权限才能来start，stop或bind这个service.</p>
<p>另外，service可以通过权限来保护她的IPC方法调用，通过调用checkCallingPermission(String)方法来确保可以执行这个操作。</p>
<p><strong>AndroidManifest.xml的Service元素</strong></p>
<pre><code class="xml">&lt;service android:name=&quot;.RemoteService&quot; android:process=&quot;:remote&quot;&gt; 
        &lt;intent-filter&gt; 
                &lt;action android:name=&quot;com.demo.IMyService&quot; /&gt; 
        &lt;/intent-filter&gt; 
&lt;/service&gt;
</code></pre>
<p>这里的android:process&#x3D;”:remote”，一开始我没有添加的，在同一个程序里使用IPC，即同一个程序作为客户端&#x2F;服务器端，结果运行mRemoteService &#x3D; IMyService.Stub.asInterface(service);时提示空指针异常。观察了人家的在不同程序里进行IPC的代码，也是没有这个android:process&#x3D;”:remote”的。后来在官方文档<a target="_blank" rel="noopener" href="http://androidappdocs.appspot.com/guide/topics/manifest/service-element.html%E9%87%8C%E4%BA%86%E8%A7%A3%E5%88%B0%EF%BC%88%E7%95%99%E6%84%8F%E7%AC%AC%E4%BA%8C%E6%AE%B5%E6%96%87%E5%AD%97%EF%BC%89%EF%BC%9A">http://androidappdocs.appspot.com/guide/topics/manifest/service-element.html里了解到（留意第二段文字）：</a></p>
<pre><code class="html">android:process
The name of the process where the service is to run. Normally, all components of an application run in the default process created for the application. It has the same name as the application package. The &lt;application&gt; element&#39;s process attribute can set a different default for all components. But component can override the default with its own process attribute, allowing you to spread your application across multiple processes.
 
If the name assigned to this attribute begins with a colon (&#39;:&#39;), a new process, private to the application, is created when it&#39;s needed and the service runs in that process. If the process name begins with a lowercase character, the service will run in a global process of that name, provided that it has permission to do so. This allows components in different applications to share a process, reducing resource usage.
</code></pre>
<p> 也就是说android:process&#x3D;”:remote”，代表在应用程序里，当需要该service时，会自动创建新的进程。而如果是android:process&#x3D;”remote”，没有“:”分号的，则创建全局进程，不同的应用程序共享该进程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-05-11-android-aidl-server/" data-id="cli8yhxgf003td92712uk436p" data-title="Android Service学习之AIDL, Parcelable和远程服务" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-05-12-android-update-sdk-no-ui" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-05-12-android-update-sdk-no-ui/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-05-12-android-update-sdk-no-ui/">Android 用命令行更新SDK</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4><p>在使用桌面系统的时候，我们都是用的<code>SDK Manager</code>, 如果现在要你部署一台CI服务器呢。</p>
<p>我擦，ssh上去，没有界面，怎么破。</p>
<p>查找了一下，Android SDK更新是支持命令的</p>
<p>如下：</p>
<pre><code class="bash">android update sdk --no-ui
</code></pre>
<p>上面的方法虽然可以更新SDK，但是他会把所有的内容都下载下来，很明显我们并不想这样子。</p>
<p>查看命令帮助可以看到有一个<code>--filter</code>属性，如下使用</p>
<pre><code class="bash">android update sdk --filter &lt;component&gt; --no-ui
</code></pre>
<p>其中<code>&lt;component&gt;</code> 可以是名字，也可以是数字。查看数字的方式如下：</p>
<pre><code class="bash">ndroid list sdk --no-ui
</code></pre>
<p>所以你可以如下使用：</p>
<pre><code class="bash">android update sdk --filter 1 --no-ui
</code></pre>
<h4 id="代理服务"><a href="#代理服务" class="headerlink" title="代理服务"></a>代理服务</h4><p>当然，还有一个问题，就是GFW, 还好我们有学校提供的镜像服务</p>
<p>我们可以这样子使用：</p>
<pre><code class="bash">android update sdk --no-ui --proxy-host &quot;mirrors.opencas.cn&quot; --proxy-port 80 -t 2 -s
</code></pre>
<h4 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h4><ol>
<li><p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/4681697/is-there-a-way-to-automate-the-android-sdk-installation?answertab=active#tab-top">Is there a way to automate the android sdk installation?</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://github.com/inferjay/AndroidDevTools">Android Tools</a></p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-05-12-android-update-sdk-no-ui/" data-id="cli8yhxgf003ud927dhfq9qo6" data-title="Android 用命令行更新SDK" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Tools-Android/" rel="tag">Tools Android</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-05-14-android-mipmap-folder" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-05-14-android-mipmap-folder/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E5%AE%89%E5%8D%93/">安卓</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-05-14-android-mipmap-folder/">Android mipmap文件夹</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>用Android Studio 创建项目的时候，默认创建<code>mipmap</code>文件夹，而不是<code>drawable</code></p>
<p>查看了一下官方的解释，如下：</p>
<pre><code class="html">drawable/
For bitmap files (PNG, JPEG, or GIF), 9-Patch image files, and XML files that describe Drawable shapes or Drawable objects that contain multiple states (normal, pressed, or focused). See the Drawable resource type.
</code></pre>
<pre><code class="html">mipmap/
For app launcher icons. The Android system retains the resources in this folder (and density-specific folders such as mipmap-xxxhdpi) regardless of the screen resolution of the device where your app is installed. This behavior allows launcher apps to pick the best resolution icon for your app to display on the home screen. For more information about using the mipmap folders.

Different home screen launcher apps on different devices show app launcher icons at various resolutions. When app resource optimization techniques remove resources for unused screen densities, launcher icons can wind up looking fuzzy because the launcher app has to upscale a lower-resolution icon for display. To avoid these display issues, apps should use the mipmap/ resource folders for launcher icons. The Android system preserves these resources regardless of density stripping, and ensures that launcher apps can pick icons with the best resolution for display.

Make sure launcher apps show a high-resolution icon for your app by moving all densities of your launcher icons to density-specific res/mipmap/ folders (for example res/mipmap-mdpi/ and res/mipmap-xxxhdpi/). The mipmap/ folders replace the drawable/ folders for launcher icons. For xxhpdi launcher icons, be sure to add the higher resolution xxxhdpi versions of the icons to enhance the visual experience of the icons on higher resolution devices.
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-05-14-android-mipmap-folder/" data-id="cli8yhxgg003xd927e6mq0yju" data-title="Android mipmap文件夹" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-2015-05-21-android-sub-emoji-text" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-05-21-android-sub-emoji-text/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.143Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-05-21-android-sub-emoji-text/">Android 截取EditText输入的Emoji表情</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code class="java">public String subInputText(String inputText,int index) &#123;
    int unicode = Character.codePointAt(text, index);
    int skip = Character.charCount(unicode);
    mInputSquares[textCount++].setText(text.substring(index, index+skip));
&#125;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-05-21-android-sub-emoji-text/" data-id="cli8yhxgh004kd9273r9kcccr" data-title="Android 截取EditText输入的Emoji表情" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2015-04-06-android-string-xml-format" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-04-06-android-string-xml-format/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.142Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-04-06-android-string-xml-format/">Android string.xml中的占位符</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code class="xml">&lt;!-- .2f表示的是保留三位小数的浮点数  --&gt;
&lt;string name=&quot;book&quot;&gt;书名 (字符串)%1$s,作者(字符串)%2$s,编号(整数)%3$d,价格(浮点型)：%4$.2f&lt;/string&gt;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-04-06-android-string-xml-format/" data-id="cli8yhxgd0031d9275ayogr1m" data-title="Android string.xml中的占位符" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2015-04-06-define-id-in-xml-file" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/05/29/2015-04-06-define-id-in-xml-file/" class="article-date">
  <time class="dt-published" datetime="2023-05-29T02:54:52.142Z" itemprop="datePublished">2023-05-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2023/05/29/2015-04-06-define-id-in-xml-file/">在`values`中定义id</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在<code>values</code>文件夹中创建<code>ids.xml</code>文件， 文件目录为：<code>values/ids.xml</code></p>
<p>我们有时候，会在代码中定义一个组件，如<code>TextView</code>,但是我们想给他设置一个Id，又不知道该设置一个<br>什么值比较好，就可以用上术方法来定义一个<code>id</code>, 具体代码如下:</p>
<pre><code class="xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;values&gt;
&lt;item name=&quot;custom_item_id&quot; type=&quot;id&quot;&gt;&lt;/item&gt;
&lt;/values&gt;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://pinned.github.io/2023/05/29/2015-04-06-define-id-in-xml-file/" data-id="cli8yhxgd0035d92724sngt9t" data-title="在`values`中定义id" class="article-share-link"><span class="fa fa-share">分享</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/4/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%AE%89%E5%8D%93/">安卓</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE/">开源项目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%B3%BB%E7%BB%9F/">系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">编程语言</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E4%B9%A6/">读书</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-Camera/" rel="tag">Android Camera</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-Gradle/" rel="tag">Android Gradle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android-Network/" rel="tag">Android Network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Proguard/" rel="tag">Proguard</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python/" rel="tag">Python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby-Ubuntu/" rel="tag">Ruby Ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Systems/" rel="tag">Systems</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/" rel="tag">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools-Android/" rel="tag">Tools Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools-Ruby/" rel="tag">Tools Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools-Ruby-Rails/" rel="tag">Tools Ruby Rails</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools-SVN-Git/" rel="tag">Tools SVN Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools-Systems/" rel="tag">Tools Systems</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu-Systems-Tools/" rel="tag">Ubuntu Systems Tools</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Android-Camera/" style="font-size: 10px;">Android Camera</a> <a href="/tags/Android-Gradle/" style="font-size: 12.5px;">Android Gradle</a> <a href="/tags/Android-Network/" style="font-size: 12.5px;">Android Network</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Proguard/" style="font-size: 10px;">Proguard</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Ruby-Ubuntu/" style="font-size: 10px;">Ruby Ubuntu</a> <a href="/tags/Shell/" style="font-size: 10px;">Shell</a> <a href="/tags/Systems/" style="font-size: 12.5px;">Systems</a> <a href="/tags/Tools/" style="font-size: 17.5px;">Tools</a> <a href="/tags/Tools-Android/" style="font-size: 15px;">Tools Android</a> <a href="/tags/Tools-Ruby/" style="font-size: 10px;">Tools Ruby</a> <a href="/tags/Tools-Ruby-Rails/" style="font-size: 10px;">Tools Ruby Rails</a> <a href="/tags/Tools-SVN-Git/" style="font-size: 10px;">Tools SVN Git</a> <a href="/tags/Tools-Systems/" style="font-size: 10px;">Tools Systems</a> <a href="/tags/Ubuntu-Systems-Tools/" style="font-size: 12.5px;">Ubuntu Systems Tools</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/05/29/2017-02-10-proguard-translate/">Proguard 翻译</a>
          </li>
        
          <li>
            <a href="/2023/05/29/2017-10-15-gradlew%20source%20analyze/">gradlew 源码分析</a>
          </li>
        
          <li>
            <a href="/2023/05/29/2019-05-21-Android-camera-preview/">Android Camera Preview</a>
          </li>
        
          <li>
            <a href="/2023/05/29/2019-08-10-Android-network-Configuration/">Android 网络配置</a>
          </li>
        
          <li>
            <a href="/2023/05/29/2019-08-10-Android-network-security-configuration/">Android Network security configuration</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 罗昭成<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>